<div
  x-data="{ 
		showCartDrawer: true,
		loading: false,
		updateCart(){
			fetch('/?view=ajax-cart-drawer')
			.then(response => response.text())
			.then(cartData => {
				$refs.cart_drawer_content.innerHTML = cartData;
				// This code is use to parse json object. for cart count
				var el = document.createElement('div');
				el.innerHTML = cartData;
				var cartCount = JSON.parse(el.querySelector('[data-options]').innerHTML).item_count;
				$dispatch('cart-count-updated', cartCount);
				this.loading = false;
			})
		}
	}"
  @update-cart.window="updateCart"
  @toggle-cart.window="showCartDrawer = !showCartDrawer">

  <div
    x-cloak
    x-show="showCartDrawer"
    @click="showCartDrawer = false; document.body.classList.remove('overflow-hidden')"
    class="overlay transition-all z-30 w-screen h-screen top-0 fixed backdrop-blur-sm bg-white/50"></div>

  <div
    x-cloak
    x-show="showCartDrawer"
    x-transition:enter="transition ease-in-out duration-300 transform"
    x-transition:enter-start="translate-x-full"
    x-transition:enter-end="translate-x-0"
    x-transition:leave="transition ease-in-out duration-300 transform"
    x-transition:leave-start="translate-x-0"
    x-transition:leave-end="translate-x-full"
    class="p-5 transition z-30 bg-white fixed top-0 right-0 md:w-[500px] w-full h-screen shadow-l">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-3xl">Koszyk</h2>
      <span class="cursor-pointer" @click="showCartDrawer = false; document.body.classList.remove('overflow-hidden')">
        {% render 'icon-close'
          , class: 'max-w-[30px] fill-textColor hover:fill-accent' %}
      </span>
    </div>
    {% render 'loader' %}
    <div x-ref="cart_drawer_content">
      {% render 'cart-drawer-content' %}
    </div>
  </div>
</div>